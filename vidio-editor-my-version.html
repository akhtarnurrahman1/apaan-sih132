<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CapCut Clone - Professional Video Editor</title>
    <meta name="description" content="Professional video editing app with modern interface, timeline editing, and advanced effects" />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        background: 'hsl(240 10% 8%)',
                        foreground: 'hsl(240 10% 95%)',
                        card: 'hsl(240 10% 10%)',
                        'card-foreground': 'hsl(240 10% 95%)',
                        primary: 'hsl(260 100% 65%)',
                        'primary-foreground': 'hsl(240 10% 8%)',
                        secondary: 'hsl(240 10% 15%)',
                        'secondary-foreground': 'hsl(240 10% 90%)',
                        muted: 'hsl(240 10% 13%)',
                        'muted-foreground': 'hsl(240 5% 60%)',
                        accent: 'hsl(280 100% 70%)',
                        border: 'hsl(240 10% 18%)',
                        input: 'hsl(240 10% 15%)',
                        ring: 'hsl(260 100% 65%)',
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            --gradient-primary: linear-gradient(135deg, hsl(260 100% 65%), hsl(280 100% 70%));
            --glass-bg: hsla(240, 10%, 15%, 0.8);
            --glass-border: hsla(240, 10%, 25%, 0.3);
        }
        
        .bg-gradient-primary { background: var(--gradient-primary); }
        .bg-glass { background: var(--glass-bg); }
        .border-glass { border-color: var(--glass-border); }
        .backdrop-blur-glass { backdrop-filter: blur(12px); }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: hsl(240 10% 10%);
            color: hsl(240 10% 95%);
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid hsl(240 10% 18%);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .video-container {
            position: relative;
            background: hsl(240 10% 5%);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .timeline {
            background: hsl(240 10% 12%);
            border-radius: 8px;
            padding: 16px;
        }
        
        .timeline-track {
            background: hsl(240 10% 20%);
            height: 40px;
            border-radius: 4px;
            margin: 8px 0;
            position: relative;
            cursor: pointer;
        }
        
        .timeline-thumb {
            position: absolute;
            top: 0;
            background: hsl(260 100% 65%);
            width: 4px;
            height: 100%;
            border-radius: 2px;
            cursor: grab;
        }
        
        .timeline-thumb:active {
            cursor: grabbing;
        }
        
        .filter-preview {
            transition: filter 0.3s ease;
        }
        
        .text-overlay {
            position: absolute;
            color: white;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            pointer-events: none;
            z-index: 10;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
        }
        
        .tool-button {
            background: hsl(240 10% 15%);
            border: 1px solid hsl(240 10% 18%);
            color: hsl(240 10% 95%);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .tool-button:hover {
            background: hsl(240 10% 20%);
            border-color: hsl(260 100% 65%);
        }
        
        .tool-button.active {
            background: hsl(260 100% 65%);
            color: hsl(240 10% 8%);
        }
        
        .slider {
            width: 100%;
            height: 4px;
            border-radius: 2px;
            background: hsl(240 10% 20%);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: hsl(260 100% 65%);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: hsl(260 100% 65%);
            cursor: pointer;
            border: none;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upload-area {
            border: 2px dashed hsl(240 10% 18%);
            border-radius: 12px;
            padding: 48px;
            text-align: center;
            background: hsl(240 10% 8%);
            transition: all 0.3s;
        }
        
        .upload-area:hover,
        .upload-area.dragover {
            border-color: hsl(260 100% 65%);
            background: hsl(240 10% 10%);
        }
    </style>
</head>
<body class="bg-background text-foreground min-h-screen">
    <!-- Upload Screen -->
    <div id="uploadScreen" class="min-h-screen flex items-center justify-center p-6">
        <div class="max-w-lg w-full">
            <div class="upload-area" id="uploadArea">
                <div class="mb-6">
                    <svg class="w-16 h-16 mx-auto mb-4 text-muted-foreground" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"/>
                    </svg>
                    <h2 class="text-2xl font-bold mb-2">Upload Your Video</h2>
                    <p class="text-muted-foreground mb-4">Drag and drop your video file here, or click to browse</p>
                </div>
                <input type="file" id="videoInput" accept="video/*" class="hidden">
                <button class="tool-button bg-gradient-primary text-primary-foreground px-6 py-3 rounded-lg font-medium" onclick="document.getElementById('videoInput').click()">
                    Choose Video File
                </button>
                <p class="text-sm text-muted-foreground mt-4">Supports MP4, MOV, AVI, WebM</p>
            </div>
        </div>
    </div>

    <!-- Main Editor -->
    <div id="mainEditor" class="hidden min-h-screen bg-background text-foreground">
        <!-- Header -->
        <header class="border-b border-border bg-glass backdrop-blur-glass">
            <div class="container mx-auto px-4 py-3 flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <h1 class="text-xl font-bold bg-gradient-primary bg-clip-text text-transparent">
                        CapCut Clone
                    </h1>
                    <button class="tool-button" onclick="newProject()">
                        <svg class="w-4 h-4 mr-2 inline" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"/>
                        </svg>
                        New Project
                    </button>
                </div>
                
                <div class="flex items-center gap-2">
                    <button class="tool-button" onclick="cutTool()">
                        <svg class="w-4 h-4 mr-2 inline" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4zm8 5l4-3v6l-4-3z"/>
                        </svg>
                        Cut
                    </button>
                    <button class="tool-button bg-gradient-primary text-primary-foreground" onclick="exportVideo()">
                        <svg class="w-4 h-4 mr-2 inline" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"/>
                        </svg>
                        Export
                    </button>
                </div>
            </div>
        </header>

        <div class="container mx-auto p-4 grid grid-cols-1 lg:grid-cols-4 gap-4 h-[calc(100vh-80px)]">
            <!-- Video Preview -->
            <div class="lg:col-span-3 space-y-4">
                <div class="video-container p-4">
                    <video id="videoPlayer" class="w-full h-auto max-h-96 rounded filter-preview" controls>
                        <source id="videoSource" src="" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <div id="textOverlays"></div>
                </div>
                
                <!-- Timeline -->
                <div class="timeline">
                    <h3 class="font-semibold mb-4">Timeline</h3>
                    <div class="space-y-2">
                        <div class="timeline-track" onclick="seekToPosition(event)">
                            <div class="timeline-thumb" id="timelineThumb"></div>
                        </div>
                        <div class="flex justify-between text-sm text-muted-foreground">
                            <span id="currentTimeDisplay">0:00</span>
                            <span id="durationDisplay">0:00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar Controls -->
            <div class="space-y-4">
                <!-- Playback Controls -->
                <div class="bg-glass border border-glass backdrop-blur-glass rounded-lg p-4">
                    <h3 class="font-semibold mb-4">Playback Controls</h3>
                    <div class="space-y-4">
                        <!-- Play/Pause -->
                        <div class="flex justify-center gap-2">
                            <button class="tool-button" onclick="skipBack()">‚è™</button>
                            <button class="tool-button" id="playPauseBtn" onclick="togglePlayPause()">‚ñ∂Ô∏è</button>
                            <button class="tool-button" onclick="skipForward()">‚è©</button>
                        </div>
                        
                        <!-- Volume -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Volume</label>
                            <input type="range" class="slider" id="volumeSlider" min="0" max="100" value="80" onchange="changeVolume(this.value)">
                        </div>
                        
                        <!-- Speed -->
                        <div>
                            <label class="block text-sm font-medium mb-2">Speed: <span id="speedDisplay">1.0x</span></label>
                            <input type="range" class="slider" id="speedSlider" min="0.25" max="3" step="0.25" value="1" onchange="changeSpeed(this.value)">
                        </div>
                        
                        <!-- Rotation -->
                        <div class="flex gap-2">
                            <button class="tool-button flex-1" onclick="rotateLeft()">‚ü≤ Left</button>
                            <button class="tool-button flex-1" onclick="rotateRight()">‚ü≥ Right</button>
                        </div>
                        
                        <button class="tool-button w-full" onclick="fullscreen()">üñ•Ô∏è Fullscreen</button>
                    </div>
                </div>

                <!-- Editing Tools -->
                <div class="bg-glass border border-glass backdrop-blur-glass rounded-lg p-4">
                    <h3 class="font-semibold mb-4">Editing Tools</h3>
                    
                    <!-- Tabs -->
                    <div class="flex mb-4 border-b border-border">
                        <button class="tab-button px-3 py-2 text-sm font-medium border-b-2 border-primary text-primary" onclick="switchTab('effects')">Effects</button>
                        <button class="tab-button px-3 py-2 text-sm font-medium text-muted-foreground" onclick="switchTab('video')">Video</button>
                        <button class="tab-button px-3 py-2 text-sm font-medium text-muted-foreground" onclick="switchTab('audio')">Audio</button>
                    </div>
                    
                    <!-- Effects Tab -->
                    <div id="effects-tab" class="tab-content active space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Filters</label>
                            <div class="controls-grid">
                                <button class="tool-button" onclick="applyFilter('none')">None</button>
                                <button class="tool-button" onclick="applyFilter('grayscale(100%)')">B&W</button>
                                <button class="tool-button" onclick="applyFilter('sepia(100%)')">Sepia</button>
                                <button class="tool-button" onclick="applyFilter('blur(5px)')">Blur</button>
                                <button class="tool-button" onclick="applyFilter('brightness(150%)')">Bright</button>
                                <button class="tool-button" onclick="applyFilter('contrast(150%)')">Contrast</button>
                                <button class="tool-button" onclick="applyFilter('saturate(200%)')">Vibrant</button>
                                <button class="tool-button" onclick="applyFilter('hue-rotate(90deg)')">Hue</button>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Color Adjustments</label>
                            <div class="space-y-2">
                                <div>
                                    <label class="text-xs">Brightness</label>
                                    <input type="range" class="slider" min="50" max="200" value="100" onchange="adjustColor('brightness', this.value)">
                                </div>
                                <div>
                                    <label class="text-xs">Contrast</label>
                                    <input type="range" class="slider" min="50" max="200" value="100" onchange="adjustColor('contrast', this.value)">
                                </div>
                                <div>
                                    <label class="text-xs">Saturation</label>
                                    <input type="range" class="slider" min="0" max="200" value="100" onchange="adjustColor('saturate', this.value)">
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <button class="tool-button w-full" onclick="addText()">üìù Add Text</button>
                        </div>
                    </div>
                    
                    <!-- Video Tab -->
                    <div id="video-tab" class="tab-content space-y-4">
                        <div class="controls-grid">
                            <button class="tool-button" onclick="cropVideo()">‚úÇÔ∏è Crop</button>
                            <button class="tool-button" onclick="reverseVideo()">‚èÆÔ∏è Reverse</button>
                            <button class="tool-button" onclick="flipHorizontal()">‚ÜîÔ∏è Flip H</button>
                            <button class="tool-button" onclick="flipVertical()">‚ÜïÔ∏è Flip V</button>
                            <button class="tool-button" onclick="zoomIn()">üîç Zoom</button>
                            <button class="tool-button" onclick="splitVideo()">‚úÇÔ∏è Split</button>
                            <button class="tool-button" onclick="stabilizeVideo()">üéØ Stabilize</button>
                            <button class="tool-button" onclick="cutSegment()">üìê Cut</button>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Zoom: <span id="zoomDisplay">1.0x</span></label>
                            <input type="range" class="slider" min="0.5" max="3" step="0.1" value="1" onchange="changeZoom(this.value)">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Pan</label>
                            <div class="grid grid-cols-2 gap-2">
                                <div>
                                    <label class="text-xs">X</label>
                                    <input type="range" class="slider" min="-100" max="100" value="0" onchange="panVideo('x', this.value)">
                                </div>
                                <div>
                                    <label class="text-xs">Y</label>
                                    <input type="range" class="slider" min="-100" max="100" value="0" onchange="panVideo('y', this.value)">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Audio Tab -->
                    <div id="audio-tab" class="tab-content space-y-4">
                        <div class="controls-grid">
                            <button class="tool-button" onclick="addBackgroundMusic()">üéµ Add Music</button>
                            <button class="tool-button" onclick="audioEffect('echo')">üîä Echo</button>
                            <button class="tool-button" onclick="audioEffect('reverb')">üé≠ Reverb</button>
                            <button class="tool-button" onclick="audioEffect('bass')">üé∏ Bass Boost</button>
                            <button class="tool-button" onclick="noiseReduction()">üîá Noise Reduce</button>
                            <button class="tool-button" onclick="normalizeAudio()">üìä Normalize</button>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2">Noise Reduction: <span id="noiseDisplay">0%</span></label>
                            <input type="range" class="slider" min="0" max="100" value="0" onchange="setNoiseReduction(this.value)">
                        </div>
                        
                        <div>
                            <button class="tool-button w-full" onclick="muteAudio()">üîá Mute/Unmute</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <script>
        // State management
        let videoState = {
            file: null,
            url: '',
            isPlaying: false,
            currentTime: 0,
            duration: 0,
            volume: 80,
            speed: 1.0,
            rotation: 0,
            filter: 'none',
            textOverlays: [],
            zoom: 1,
            pan: { x: 0, y: 0 },
            isReversed: false,
            flipH: false,
            flipV: false,
            isMuted: false
        };

        // DOM elements
        const uploadScreen = document.getElementById('uploadScreen');
        const mainEditor = document.getElementById('mainEditor');
        const videoInput = document.getElementById('videoInput');
        const uploadArea = document.getElementById('uploadArea');
        const videoPlayer = document.getElementById('videoPlayer');
        const videoSource = document.getElementById('videoSource');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const timelineThumb = document.getElementById('timelineThumb');

        // Utility functions
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay() {
            document.getElementById('currentTimeDisplay').textContent = formatTime(videoState.currentTime);
            document.getElementById('durationDisplay').textContent = formatTime(videoState.duration);
        }

        function updateTimeline() {
            if (videoState.duration > 0) {
                const percentage = (videoState.currentTime / videoState.duration) * 100;
                timelineThumb.style.left = `${percentage}%`;
            }
        }

        // File upload handling
        videoInput.addEventListener('change', handleVideoUpload);
        uploadArea.addEventListener('click', () => videoInput.click());
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0 && files[0].type.startsWith('video/')) {
                handleVideoUpload({ target: { files: [files[0]] } });
            }
        });

        function handleVideoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            videoState.file = file;
            videoState.url = URL.createObjectURL(file);
            videoSource.src = videoState.url;
            videoPlayer.load();

            uploadScreen.classList.add('hidden');
            mainEditor.classList.remove('hidden');
            showToast('Video uploaded successfully!');
        }

        // Video player event listeners
        videoPlayer.addEventListener('loadedmetadata', () => {
            videoState.duration = videoPlayer.duration;
            updateTimeDisplay();
        });

        videoPlayer.addEventListener('timeupdate', () => {
            videoState.currentTime = videoPlayer.currentTime;
            updateTimeDisplay();
            updateTimeline();
        });

        videoPlayer.addEventListener('play', () => {
            videoState.isPlaying = true;
            playPauseBtn.textContent = '‚è∏Ô∏è';
        });

        videoPlayer.addEventListener('pause', () => {
            videoState.isPlaying = false;
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
        });

        // Playback controls
        function togglePlayPause() {
            if (videoState.isPlaying) {
                videoPlayer.pause();
            } else {
                videoPlayer.play();
            }
        }

        function skipBack() {
            videoPlayer.currentTime = Math.max(0, videoPlayer.currentTime - 10);
        }

        function skipForward() {
            videoPlayer.currentTime = Math.min(videoState.duration, videoPlayer.currentTime + 10);
        }

        function changeVolume(value) {
            videoState.volume = value;
            videoPlayer.volume = value / 100;
        }

        function changeSpeed(value) {
            videoState.speed = parseFloat(value);
            videoPlayer.playbackRate = videoState.speed;
            document.getElementById('speedDisplay').textContent = `${value}x`;
            showToast(`Playback speed changed to ${value}x`);
        }

        function rotateLeft() {
            videoState.rotation -= 90;
            applyTransforms();
            showToast('Video rotated left');
        }

        function rotateRight() {
            videoState.rotation += 90;
            applyTransforms();
            showToast('Video rotated right');
        }

        function fullscreen() {
            if (videoPlayer.requestFullscreen) {
                videoPlayer.requestFullscreen();
            }
        }

        // Timeline interaction
        function seekToPosition(event) {
            const rect = event.currentTarget.getBoundingClientRect();
            const percentage = (event.clientX - rect.left) / rect.width;
            const time = percentage * videoState.duration;
            videoPlayer.currentTime = time;
        }

        // Video effects and filters
        function applyFilter(filter) {
            videoState.filter = filter;
            videoPlayer.style.filter = filter === 'none' ? '' : filter;
            showToast(`Filter applied: ${filter === 'none' ? 'None' : filter}`);
        }

        function adjustColor(property, value) {
            const filters = [];
            if (property === 'brightness') filters.push(`brightness(${value}%)`);
            if (property === 'contrast') filters.push(`contrast(${value}%)`);
            if (property === 'saturate') filters.push(`saturate(${value}%)`);
            
            // Keep existing filters and update the specific one
            let currentFilter = videoPlayer.style.filter || '';
            let filterArray = currentFilter.split(' ').filter(f => f && !f.startsWith(property));
            filterArray.push(`${property}(${value}%)`);
            
            videoPlayer.style.filter = filterArray.join(' ');
        }

        function applyTransforms() {
            const transforms = [];
            if (videoState.rotation !== 0) transforms.push(`rotate(${videoState.rotation}deg)`);
            if (videoState.zoom !== 1) transforms.push(`scale(${videoState.zoom})`);
            if (videoState.pan.x !== 0 || videoState.pan.y !== 0) {
                transforms.push(`translate(${videoState.pan.x}px, ${videoState.pan.y}px)`);
            }
            if (videoState.flipH) transforms.push('scaleX(-1)');
            if (videoState.flipV) transforms.push('scaleY(-1)');
            
            videoPlayer.style.transform = transforms.join(' ');
        }

        // Video editing tools
        function cropVideo() {
            showToast('Crop tool activated - this would open a crop interface');
        }

        function reverseVideo() {
            videoState.isReversed = !videoState.isReversed;
            showToast(`Video direction ${videoState.isReversed ? 'reversed' : 'restored'}`);
        }

        function flipHorizontal() {
            videoState.flipH = !videoState.flipH;
            applyTransforms();
            showToast('Video flipped horizontally');
        }

        function flipVertical() {
            videoState.flipV = !videoState.flipV;
            applyTransforms();
            showToast('Video flipped vertically');
        }

        function changeZoom(value) {
            videoState.zoom = parseFloat(value);
            document.getElementById('zoomDisplay').textContent = `${value}x`;
            applyTransforms();
        }

        function zoomIn() {
            const newZoom = Math.min(3, videoState.zoom + 0.2);
            document.querySelector('#video-tab input[type="range"]').value = newZoom;
            changeZoom(newZoom);
        }

        function panVideo(axis, value) {
            videoState.pan[axis] = parseInt(value);
            applyTransforms();
        }

        function splitVideo() {
            showToast(`Video split at ${videoState.currentTime.toFixed(2)}s`);
        }

        function stabilizeVideo() {
            showToast('Video stabilization applied');
        }

        function cutSegment() {
            showToast('Cut tool activated - select start and end points');
        }

        // Audio tools
        function addBackgroundMusic() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'audio/*';
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    showToast(`Background music "${file.name}" added!`);
                }
            };
            input.click();
        }

        function audioEffect(effect) {
            showToast(`${effect} effect applied to audio`);
        }

        function noiseReduction() {
            showToast('Noise reduction applied');
        }

        function setNoiseReduction(value) {
            document.getElementById('noiseDisplay').textContent = `${value}%`;
            showToast(`Noise reduction set to ${value}%`);
        }

        function normalizeAudio() {
            showToast('Audio normalized');
        }

        function muteAudio() {
            videoState.isMuted = !videoState.isMuted;
            videoPlayer.muted = videoState.isMuted;
            showToast(`Audio ${videoState.isMuted ? 'muted' : 'unmuted'}`);
        }

        // Text overlay
        function addText() {
            const text = prompt('Enter text to overlay:');
            if (text) {
                const overlay = document.createElement('div');
                overlay.className = 'text-overlay';
                overlay.textContent = text;
                overlay.style.left = '50%';
                overlay.style.top = '50%';
                overlay.style.transform = 'translate(-50%, -50%)';
                
                document.getElementById('textOverlays').appendChild(overlay);
                showToast('Text overlay added');
            }
        }

        // Tab switching
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('border-primary', 'text-primary');
                btn.classList.add('text-muted-foreground');
            });
            event.target.classList.add('border-primary', 'text-primary');
            event.target.classList.remove('text-muted-foreground');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}-tab`).classList.add('active');
        }

        // Header actions
        function newProject() {
            if (confirm('Start a new project? Current progress will be lost.')) {
                videoState = {
                    file: null,
                    url: '',
                    isPlaying: false,
                    currentTime: 0,
                    duration: 0,
                    volume: 80,
                    speed: 1.0,
                    rotation: 0,
                    filter: 'none',
                    textOverlays: [],
                    zoom: 1,
                    pan: { x: 0, y: 0 },
                    isReversed: false,
                    flipH: false,
                    flipV: false,
                    isMuted: false
                };
                
                uploadScreen.classList.remove('hidden');
                mainEditor.classList.add('hidden');
                document.getElementById('textOverlays').innerHTML = '';
                videoPlayer.style.filter = '';
                videoPlayer.style.transform = '';
            }
        }

        function cutTool() {
            showToast('Cut tool activated! Use the timeline to cut at specific positions.');
        }

        function exportVideo() {
            showToast('Video export started! This is a demo - export functionality would be implemented with a video processing library.');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('CapCut Clone Video Editor loaded');
        });
    </script>
</body>
</html>
