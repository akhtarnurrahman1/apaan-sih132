<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Koding (Playground)</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat Ace Editor -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.2/ace.js"></script>
    <style>
        /* Menyesuaikan tinggi editor Ace */
        .editor {
            height: 300px;
            width: 100%;
            border-radius: 0.5rem;
        }
        /* Menghapus border focus default */
        .ace_editor {
            border: 1px solid #D1D5DB; /* border-gray-300 */
        }
        .ace_editor:focus-within {
             border: 1px solid #3B82F6; /* border-blue-500 */
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="container mx-auto p-4">
        <header class="text-center mb-6">
            <h1 class="text-4xl font-bold text-gray-800">Code Playground</h1>
            <p class="text-gray-600 mt-1">Tulis kode HTML, CSS, dan JavaScript lalu lihat hasilnya secara live!</p>
        </header>

        <!-- Kontainer utama dengan layout grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">

            <!-- Kolom untuk editor kode -->
            <div class="flex flex-col gap-4">
                <!-- Editor HTML -->
                <div>
                    <label for="html-editor" class="block text-sm font-medium text-gray-700 mb-1">HTML</label>
                    <div id="html-editor" class="editor"></div>
                </div>

                <!-- Editor CSS -->
                <div>
                    <label for="css-editor" class="block text-sm font-medium text-gray-700 mb-1">CSS</label>
                    <div id="css-editor" class="editor"></div>
                </div>

                <!-- Editor JavaScript -->
                <div>
                    <label for="js-editor" class="block text-sm font-medium text-gray-700 mb-1">JavaScript</label>
                    <div id="js-editor" class="editor"></div>
                </div>
            </div>

            <!-- Kolom untuk pratinjau -->
            <div>
                <label for="preview" class="block text-sm font-medium text-gray-700 mb-1">Pratinjau Langsung</label>
                <iframe id="preview" class="w-full h-[924px] bg-white rounded-lg shadow-md border border-gray-300"></iframe>
            </div>

        </div>
    </div>

    <script>
        // Fungsi untuk menginisialisasi Ace Editor
        function createEditor(id, mode) {
            const editor = ace.edit(id);
            editor.setTheme("ace/theme/monokai"); // Tema gelap yang populer
            editor.session.setMode(`ace/mode/${mode}`);
            editor.setOptions({
                fontSize: "14px",
                enableBasicAutocompletion: true,
                enableLiveAutocompletion: true,
                enableSnippets: true
            });
            return editor;
        }

        // Inisialisasi editor untuk setiap bahasa
        const htmlEditor = createEditor('html-editor', 'html');
        const cssEditor = createEditor('css-editor', 'css');
        const jsEditor = createEditor('js-editor', 'javascript');

        // Menambahkan kode awal sebagai contoh
        htmlEditor.setValue(`<!-- Tulis kode HTML Anda di sini -->
<div class="container">
  <h1>Halo, Dunia Koding!</h1>
  <p>Ini adalah aplikasi playground kode Anda.</p>
  <button id="myButton">Klik Saya!</button>
</div>`);

        cssEditor.setValue(`/* Tulis kode CSS Anda di sini */
body {
  font-family: sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  background-color: #f0f0f0;
}
.container {
  text-align: center;
  padding: 2em;
  background-color: white;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
button {
  background-color: #007BFF;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
  transition: background-color 0.3s;
}
button:hover {
  background-color: #0056b3;
}`);

        jsEditor.setValue(`// Tulis kode JavaScript Anda di sini
const button = document.getElementById('myButton');

button.addEventListener('click', () => {
  alert('Tombol berhasil diklik!');
});`);

        // Fungsi untuk memperbarui pratinjau di iframe
        function updatePreview() {
            const previewFrame = document.getElementById('preview');
            const preview =  previewFrame.contentDocument ||  previewFrame.contentWindow.document;

            const htmlCode = htmlEditor.getValue();
            const cssCode = cssEditor.getValue();
            const jsCode = jsEditor.getValue();

            preview.open();
            preview.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <style>${cssCode}</style>
                </head>
                <body>
                    ${htmlCode}
                    <script>${jsCode}<\/script>
                </body>
                </html>
            `);
            preview.close();
        }

        // Memperbarui pratinjau setiap kali ada perubahan di editor
        htmlEditor.session.on('change', updatePreview);
        cssEditor.session.on('change', updatePreview);
        jsEditor.session.on('change', updatePreview);

        // Memuat pratinjau awal saat halaman pertama kali dibuka
        window.onload = updatePreview;
    </script>

</body>
</html>
