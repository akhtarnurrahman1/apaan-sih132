<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generator Kata Sandi Acak</title>
  <!-- Load Tailwind CSS from CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-700 via-blue-700 to-sky-700 flex items-center justify-center p-4">
  <div class="bg-white bg-opacity-95 p-8 rounded-3xl shadow-xl border border-white border-opacity-30 w-full max-w-md space-y-7 transform hover:scale-105 transition-transform duration-500 ease-in-out backdrop-filter backdrop-blur-lg">
    <h1 class="text-4xl font-extrabold text-center text-gray-900 mb-6 tracking-tight">Generator Kata Sandi</h1>

    <!-- Password Display -->
    <div class="flex items-center bg-gray-100 rounded-xl p-3 shadow-inner border border-gray-200">
      <input
        type="text"
        id="password-display"
        class="flex-grow bg-transparent text-gray-800 text-2xl font-bold p-2 focus:outline-none"
        readonly
        placeholder="Kata sandi Anda akan muncul di sini"
      />
      <button
        id="copy-btn"
        class="bg-blue-500 text-white px-4 py-2 rounded-lg text-lg font-semibold shadow-md hover:bg-blue-600 transition-colors duration-300 ml-3"
      >
        Salin
      </button>
    </div>

    <!-- Options Section -->
    <div class="space-y-5 mt-6">
      <!-- Password Length -->
      <div>
        <label for="password-length" class="block text-base font-medium text-gray-700 mb-2">
          Panjang Kata Sandi: <span id="length-value" class="font-bold text-blue-600">12</span>
        </label>
        <input
          type="range"
          id="password-length"
          min="4"
          max="32"
          value="12"
          class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg focus:outline-none focus:ring-2 focus:ring-blue-400 transition-all duration-300 ease-in-out"
        />
      </div>

      <!-- Character Types -->
      <div class="space-y-3">
        <label class="block text-base font-medium text-gray-700 mb-1">
          Sertakan:
        </label>
        <div class="flex items-center">
          <input type="checkbox" id="include-uppercase" checked class="h-5 w-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300" />
          <label for="include-uppercase" class="ml-3 text-lg text-gray-800">Huruf Besar (ABC)</label>
        </div>
        <div class="flex items-center">
          <input type="checkbox" id="include-lowercase" checked class="h-5 w-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300" />
          <label for="include-lowercase" class="ml-3 text-lg text-gray-800">Huruf Kecil (abc)</label>
        </div>
        <div class="flex items-center">
          <input type="checkbox" id="include-numbers" checked class="h-5 w-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300" />
          <label for="include-numbers" class="ml-3 text-lg text-gray-800">Angka (123)</label>
        </div>
        <div class="flex items-center">
          <input type="checkbox" id="include-symbols" class="h-5 w-5 text-blue-600 rounded focus:ring-blue-500 border-gray-300" />
          <label for="include-symbols" class="ml-3 text-lg text-gray-800">Simbol (!@#$)</label>
        </div>
      </div>

      <!-- Generate Button -->
      <button
        id="generate-btn"
        class="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-xl shadow-lg hover:bg-blue-700 transition-all duration-300 ease-in-out mt-6"
      >
        Buat Kata Sandi
      </button>
    </div>
  </div>

  <script>
    // DOM Elements
    const passwordDisplay = document.getElementById('password-display');
    const copyBtn = document.getElementById('copy-btn');
    const passwordLengthSlider = document.getElementById('password-length');
    const lengthValueSpan = document.getElementById('length-value');
    const includeUppercaseCheckbox = document.getElementById('include-uppercase');
    const includeLowercaseCheckbox = document.getElementById('include-lowercase');
    const includeNumbersCheckbox = document.getElementById('include-numbers');
    const includeSymbolsCheckbox = document.getElementById('include-symbols');
    const generateBtn = document.getElementById('generate-btn');

    // Character sets
    const uppercaseChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const lowercaseChars = 'abcdefghijklmnopqrstuvwxyz';
    const numberChars = '0123456789';
    const symbolChars = '!@#$%^&*()_-+=[]{};:,.<>?';

    // Function to generate password
    function generatePassword() {
      const length = parseInt(passwordLengthSlider.value);
      let allowedChars = '';
      let generatedPassword = '';

      if (includeUppercaseCheckbox.checked) allowedChars += uppercaseChars;
      if (includeLowercaseCheckbox.checked) allowedChars += lowercaseChars;
      if (includeNumbersCheckbox.checked) allowedChars += numberChars;
      if (includeSymbolsCheckbox.checked) allowedChars += symbolChars;

      if (allowedChars.length === 0) {
        passwordDisplay.value = 'Pilih setidaknya satu jenis karakter!';
        return;
      }

      for (let i = 0; i < length; i++) {
        const randomIndex = Math.floor(Math.random() * allowedChars.length);
        generatedPassword += allowedChars[randomIndex];
      }

      passwordDisplay.value = generatedPassword;
    }

    // Function to copy password to clipboard
    function copyPassword() {
      const password = passwordDisplay.value;
      if (password && password !== 'Pilih setidaknya satu jenis karakter!') {
        // Use document.execCommand('copy') for better iframe compatibility
        const textarea = document.createElement('textarea');
        textarea.value = password;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);

        // Optional: Provide visual feedback
        copyBtn.textContent = 'Disalin!';
        setTimeout(() => {
          copyBtn.textContent = 'Salin';
        }, 1500);
      }
    }

    // Event Listeners
    passwordLengthSlider.addEventListener('input', () => {
      lengthValueSpan.textContent = passwordLengthSlider.value;
      generatePassword(); // Regenerate password when length changes
    });

    includeUppercaseCheckbox.addEventListener('change', generatePassword);
    includeLowercaseCheckbox.addEventListener('change', generatePassword);
    includeNumbersCheckbox.addEventListener('change', generatePassword);
    includeSymbolsCheckbox.addEventListener('change', generatePassword);
    generateBtn.addEventListener('click', generatePassword);
    copyBtn.addEventListener('click', copyPassword);

    // Initial password generation on page load
    window.onload = generatePassword;
  </script>
</body>
</html>
