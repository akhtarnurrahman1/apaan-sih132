<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penggabung HTML</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Tambahkan border visual untuk elemen yang bisa diedit */
        [contenteditable="true"] {
            border: 2px dashed #3B82F6; /* Biru */
            border-radius: 0.5rem;
            padding: 0.25rem;
        }
        iframe {
            width: 100%;
            height: 40rem; /* Ketinggian pratinjau */
            border: none;
            background-color: white;
            border-radius: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 p-6 flex items-center justify-center min-h-screen">
    <div class="container mx-auto p-8 bg-gray-800 rounded-xl shadow-lg w-full max-w-4xl">
        <div id="editable-container">
            <h1 id="main-title" class="text-3xl font-bold mb-6 text-center text-white" contenteditable="false">Penggabung HTML</h1>
            <p id="main-description" class="text-center text-gray-400 mb-8" contenteditable="false">Masukkan beberapa blok kode HTML di bawah ini, lalu klik tombol "Gabungkan HTML" untuk melihat hasilnya.</p>
        </div>
        
        <!-- Kontainer untuk area input HTML -->
        <div id="html-inputs" class="space-y-4 mb-6">
            <!-- Area input HTML pertama -->
            <textarea placeholder="Masukkan kode HTML pertama di sini..."
                      class="w-full h-40 p-4 bg-gray-700 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"></textarea>
            <!-- Area input HTML kedua -->
            <textarea placeholder="Masukkan kode HTML kedua di sini..."
                      class="w-full h-40 p-4 bg-gray-700 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"></textarea>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 mb-8">
            <!-- Tombol untuk mengaktifkan mode edit -->
            <button onclick="toggleEditMode()" id="edit-mode-button" class="flex-1 bg-purple-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-purple-500 transition-colors duration-200" contenteditable="false">
                Aktifkan Mode Edit
            </button>
            <!-- Tombol untuk menambahkan area input baru -->
            <button onclick="addInputArea()" class="flex-1 bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg shadow-md hover:bg-gray-500 transition-colors duration-200" contenteditable="false">
                Tambah Area Input
            </button>
            <!-- Tombol untuk menggabungkan HTML -->
            <button onclick="mergeHtml()" class="flex-1 bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200" contenteditable="false">
                Gabungkan HTML
            </button>
            <!-- Tombol untuk melihat pratinjau -->
            <button onclick="previewHtml()" class="flex-1 bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition-colors duration-200" contenteditable="false">
                Lihat Pratinjau
            </button>
        </div>
        
        <!-- Area hasil -->
        <div class="mt-8">
            <h2 class="text-2xl font-semibold mb-4 text-white">Hasil Gabungan</h2>
            
            <!-- Tab untuk beralih antara kode dan pratinjau -->
            <div class="flex border-b border-gray-700 mb-4">
                <button id="tab-code" onclick="showTab('code')" class="py-2 px-4 text-sm font-medium border-b-2 border-transparent hover:border-blue-500 transition-colors duration-200">
                    Kode HTML
                </button>
                <button id="tab-preview" onclick="showTab('preview')" class="py-2 px-4 text-sm font-medium border-b-2 border-transparent hover:border-blue-500 transition-colors duration-200">
                    Pratinjau
                </button>
            </div>
            
            <!-- Konten tab: Kode -->
            <div id="content-code" class="relative">
                <!-- Tombol salin -->
                <button onclick="copyToClipboard()" id="copy-button" class="absolute top-2 right-2 p-2 bg-gray-600 text-white rounded-md opacity-75 hover:opacity-100 transition-opacity duration-200 text-sm">
                    Salin
                </button>
                <!-- Area untuk menampilkan hasil -->
                <pre id="output" class="w-full p-4 bg-gray-700 text-gray-200 rounded-lg overflow-auto whitespace-pre-wrap break-words h-96"></pre>
            </div>
            
            <!-- Konten tab: Pratinjau -->
            <div id="content-preview" class="hidden">
                <iframe id="preview-iframe" class="w-full h-[40rem] bg-white rounded-lg"></iframe>
            </div>
        </div>
    </div>

    <script>
        // Default ke tab kode saat halaman dimuat
        document.addEventListener('DOMContentLoaded', () => {
            showTab('code');
        });

        /**
         * Fungsi untuk mengaktifkan/menonaktifkan mode edit.
         * Ini membuat elemen-elemen UI tertentu dapat diedit secara langsung.
         */
        function toggleEditMode() {
            const editModeButton = document.getElementById('edit-mode-button');
            const isEditing = editModeButton.textContent === 'Selesai Mengedit';
            
            const editableElements = document.querySelectorAll('#editable-container h1, #editable-container p, button:not(#edit-mode-button)');

            if (isEditing) {
                // Nonaktifkan mode edit
                editModeButton.textContent = 'Aktifkan Mode Edit';
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
            } else {
                // Aktifkan mode edit
                editModeButton.textContent = 'Selesai Mengedit';
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
            }
        }

        /**
         * Fungsi untuk menambahkan area input HTML baru.
         */
        function addInputArea() {
            const inputContainer = document.getElementById('html-inputs');
            const newTextarea = document.createElement('textarea');
            newTextarea.placeholder = 'Masukkan kode HTML di sini...';
            newTextarea.className = 'w-full h-40 p-4 bg-gray-700 text-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200';
            inputContainer.appendChild(newTextarea);
        }

        /**
         * Fungsi utama untuk menggabungkan kode HTML dari semua area input.
         */
        function mergeHtml() {
            const textareas = document.querySelectorAll('#html-inputs textarea');
            let combinedHtml = '';

            textareas.forEach(textarea => {
                combinedHtml += textarea.value.trim();
            });

            const outputElement = document.getElementById('output');
            outputElement.textContent = combinedHtml;
            showTab('code'); // Setelah menggabungkan, tampilkan tab kode
        }

        /**
         * Fungsi untuk menyalin teks dari area hasil ke clipboard.
         */
        function copyToClipboard() {
            const outputElement = document.getElementById('output');
            const textToCopy = outputElement.textContent;

            const textareaTemp = document.createElement('textarea');
            textareaTemp.value = textToCopy;
            document.body.appendChild(textareaTemp);
            textareaTemp.select();
            document.execCommand('copy');
            document.body.removeChild(textareaTemp);

            // Memberikan umpan balik visual
            const copyButton = document.getElementById('copy-button');
            const originalText = copyButton.textContent;
            copyButton.textContent = 'Tersalin!';
            setTimeout(() => {
                copyButton.textContent = originalText;
            }, 2000);
        }

        /**
         * Fungsi untuk beralih antara tab "Kode" dan "Pratinjau".
         * @param {string} tabName - Nama tab yang akan ditampilkan ('code' atau 'preview').
         */
        function showTab(tabName) {
            const codeTab = document.getElementById('tab-code');
            const previewTab = document.getElementById('tab-preview');
            const codeContent = document.getElementById('content-code');
            const previewContent = document.getElementById('content-preview');

            if (tabName === 'code') {
                codeTab.classList.add('text-blue-500', 'border-blue-500');
                previewTab.classList.remove('text-blue-500', 'border-blue-500');
                codeContent.classList.remove('hidden');
                previewContent.classList.add('hidden');
            } else if (tabName === 'preview') {
                codeTab.classList.remove('text-blue-500', 'border-blue-500');
                previewTab.classList.add('text-blue-500', 'border-blue-500');
                codeContent.classList.add('hidden');
                previewContent.classList.remove('hidden');
                // Panggil fungsi pratinjau saat tab pratinjau dipilih
                renderPreview();
            }
        }

        /**
         * Fungsi untuk merender pratinjau HTML ke dalam iframe.
         */
        function renderPreview() {
            const textareas = document.querySelectorAll('#html-inputs textarea');
            let combinedHtml = '';

            textareas.forEach(textarea => {
                combinedHtml += textarea.value;
            });

            const iframe = document.getElementById('preview-iframe');
            // Membuat dokumen HTML lengkap untuk pratinjau
            const fullHtml = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Pratinjau</title>
                    <style>
                        body {
                            font-family: sans-serif;
                            margin: 20px;
                            background-color: #f0f0f0;
                            color: #333;
                        }
                    </style>
                </head>
                <body>
                    ${combinedHtml}
                </body>
                </html>
            `;
            iframe.srcdoc = fullHtml;
        }
    </script>
</body>
</html>
