<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Breakout</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: white;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        canvas {
            border: 3px solid white;
            border-radius: 10px;
            background: #1a1a2e;
            display: block;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .controls {
            text-align: center;
            margin-top: 20px;
            font-size: 1rem;
            opacity: 0.8;
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
        }

        .restart-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
            transition: transform 0.2s;
        }

        .restart-btn:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ðŸŽ® BREAKOUT</h1>
        <div class="game-info">
            <div>Skor: <span id="score">0</span></div>
            <div>Nyawa: <span id="lives">3</span></div>
        </div>
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div class="controls">
            Gunakan panah kiri/kanan atau A/D untuk menggerakkan paddle
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <h2 id="gameOverTitle">Game Over!</h2>
        <p id="finalScore">Skor Akhir: 0</p>
        <button class="restart-btn" onclick="restartGame()">Main Lagi</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Game variables
        let score = 0;
        let lives = 3;
        let gameRunning = true;

        // Paddle
        const paddle = {
            x: canvas.width / 2 - 60,
            y: canvas.height - 30,
            width: 120,
            height: 15,
            speed: 8
        };

        // Ball
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 10,
            dx: 3,
            dy: -3
        };

        // Bricks
        const bricks = [];
        const brickRows = 6;
        const brickCols = 10;
        const brickWidth = 75;
        const brickHeight = 25;
        const brickPadding = 5;
        const brickOffsetTop = 60;
        const brickOffsetLeft = 35;

        // Colors for different rows
        const brickColors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];

        // Initialize bricks
        function initBricks() {
            for (let r = 0; r < brickRows; r++) {
                bricks[r] = [];
                for (let c = 0; c < brickCols; c++) {
                    bricks[r][c] = {
                        x: c * (brickWidth + brickPadding) + brickOffsetLeft,
                        y: r * (brickHeight + brickPadding) + brickOffsetTop,
                        status: 1,
                        color: brickColors[r]
                    };
                }
            }
        }

        // Draw paddle
        function drawPaddle() {
            ctx.fillStyle = '#fff';
            ctx.shadowColor = '#4ecdc4';
            ctx.shadowBlur = 10;
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
            ctx.shadowBlur = 0;
        }

        // Draw ball
        function drawBall() {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#fff';
            ctx.shadowColor = '#ff6b6b';
            ctx.shadowBlur = 15;
            ctx.fill();
            ctx.shadowBlur = 0;
            ctx.closePath();
        }

        // Draw bricks
        function drawBricks() {
            for (let r = 0; r < brickRows; r++) {
                for (let c = 0; c < brickCols; c++) {
                    if (bricks[r][c].status === 1) {
                        const brick = bricks[r][c];
                        ctx.fillStyle = brick.color;
                        ctx.shadowColor = brick.color;
                        ctx.shadowBlur = 5;
                        ctx.fillRect(brick.x, brick.y, brickWidth, brickHeight);
                        ctx.shadowBlur = 0;
                    }
                }
            }
        }

        // Collision detection
        function collisionDetection() {
            for (let r = 0; r < brickRows; r++) {
                for (let c = 0; c < brickCols; c++) {
                    const brick = bricks[r][c];
                    if (brick.status === 1) {
                        if (ball.x > brick.x && ball.x < brick.x + brickWidth &&
                            ball.y > brick.y && ball.y < brick.y + brickHeight) {
                            ball.dy = -ball.dy;
                            brick.status = 0;
                            score += 10;
                            updateScore();
                            
                            // Check if all bricks are destroyed
                            if (score === brickRows * brickCols * 10) {
                                endGame('Selamat! Kamu Menang! ðŸŽ‰');
                            }
                        }
                    }
                }
            }
        }

        // Update score display
        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        // Update lives display
        function updateLives() {
            document.getElementById('lives').textContent = lives;
        }

        // End game
        function endGame(message) {
            gameRunning = false;
            document.getElementById('gameOverTitle').textContent = message;
            document.getElementById('finalScore').textContent = `Skor Akhir: ${score}`;
            document.getElementById('gameOver').style.display = 'block';
        }

        // Restart game
        function restartGame() {
            score = 0;
            lives = 3;
            gameRunning = true;
            
            // Reset ball position
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.dx = 3;
            ball.dy = -3;
            
            // Reset paddle position
            paddle.x = canvas.width / 2 - 60;
            
            // Reset bricks
            initBricks();
            
            // Update displays
            updateScore();
            updateLives();
            
            // Hide game over screen
            document.getElementById('gameOver').style.display = 'none';
            
            // Start game loop
            gameLoop();
        }

        // Keyboard controls
        const keys = {};
        
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        // Game loop
        function gameLoop() {
            if (!gameRunning) return;
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Handle paddle movement
            if ((keys['ArrowLeft'] || keys['a'] || keys['A']) && paddle.x > 0) {
                paddle.x -= paddle.speed;
            }
            if ((keys['ArrowRight'] || keys['d'] || keys['D']) && paddle.x < canvas.width - paddle.width) {
                paddle.x += paddle.speed;
            }
            
            // Move ball
            ball.x += ball.dx;
            ball.y += ball.dy;
            
            // Ball collision with walls
            if (ball.x + ball.radius > canvas.width || ball.x - ball.radius < 0) {
                ball.dx = -ball.dx;
            }
            if (ball.y - ball.radius < 0) {
                ball.dy = -ball.dy;
            }
            
            // Ball collision with paddle
            if (ball.y + ball.radius > paddle.y && 
                ball.x > paddle.x && 
                ball.x < paddle.x + paddle.width) {
                ball.dy = -ball.dy;
                
                // Add some angle based on where ball hits paddle
                const hitPos = (ball.x - paddle.x) / paddle.width;
                ball.dx = 5 * (hitPos - 0.5);
            }
            
            // Ball falls below paddle
            if (ball.y + ball.radius > canvas.height) {
                lives--;
                updateLives();
                
                if (lives === 0) {
                    endGame('Game Over! ðŸ’€');
                } else {
                    // Reset ball position
                    ball.x = canvas.width / 2;
                    ball.y = canvas.height / 2;
                    ball.dx = 3;
                    ball.dy = -3;
                }
            }
            
            // Check collisions with bricks
            collisionDetection();
            
            // Draw everything
            drawBricks();
            drawPaddle();
            drawBall();
            
            requestAnimationFrame(gameLoop);
        }

        // Initialize game
        initBricks();
        updateScore();
        updateLives();
        gameLoop();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97811bec76e3cec2',t:'MTc1NjY5MTM0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
